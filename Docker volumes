-> Docker volumes is a mechanism for "persisting data" generated by Docker containers.  

    -> Docker volumes allow data to persist even when containers are deleted. 

    -> Docker Volumes 

        -> Named Volumes controlled by Docker 

            -> Named Volumes are good for fixed data 

            -> -v name_of_volume:/path_container

        -> Host Volumes / Bind Mounts controlled by User    

            -> Host Volumes are good for variable data 

            -> -v /path_host:/path_container

        -> NOTE: With Volumes data is persisted on Host System


-> Containers Without Volumes 

        -> docker container run -dt --name c1 ubuntu:22.04
        -> docker container exec c1 ls /
        -> docker container exec c1 mkdir /data 
        -> docker container exec c1 touch /data/imp.zip 
        -> docker container exec c1 ls /data
        -> docker container rm -f c1 

    -> Containers With Volumes 

        -> NAMED VOLUME

        -> docker volume ls 
        -> docker container run -dt --name c1 -v imp_vol:/data ubuntu:22.04
        -> docker volume ls 
        -> docker volume inspect imp_vol
        -> docker container exec c1 ls /
        -> sudo ls /var/lib/docker/volumes/imp_vol/_data
        -> docker container exec c1 touch /data/imp.zip 
        -> docker container exec c1 ls /data
        -> sudo ls /var/lib/docker/volumes/imp_vol/_data
        -> docker container rm -f c1 
        -> sudo ls /var/lib/docker/volumes/imp_vol/_data
        -> docker volume ls 


        -> docker container run -dt --name web-app -v login_vol:/usr/share/nginx/html -p 8080:80 nginx  
        -> docker container exec -it web-app bash 
        -> apt update -y && apt install git -y
        -> rm -r /usr/share/nginx/html/*
        -> git clone https://github.com/saif7m/login-2519.git /usr/share/nginx/html
        -> exit 
        -> docker volume ls
        -> docker volume inspect login_vol
        -> sudo ls /var/lib/docker/volumes/login_vol/_data
        -> docker container rm -f web-app
        -> docker container run -dt --name web-app -v login_vol:/usr/share/nginx/html -p 8080:80 nginx  

        -> Problem with Named Volume 

            -> update code in repo 
            -> docker container exec -it web-app bash 
            -> cd /usr/share/nginx/html
            -> git pull 
            -> exit 
            -> docker volume inspect login_vol
            -> sudo ls /var/lib/docker/volumes/login_vol/_data
            -> cd /var/lib/docker/volumes/login_vol/_data
            -> sudo cd /var/lib/docker/volumes/login_vol/_data

        -> HOST VOLUME / BIND MOUNT 

        -> git clone https://github.com/saif7m/login-2519.git 
        -> ls login-2519
        -> docker container run -dt --name web-app-new -v ~/login-2519:/usr/share/nginx/html -p 8081:80 nginx  
        -> docker volume ls
        -> cd login-2519
        -> git pull 

        -> NOTE: Clean up all resources 

        -> docker container run -dt --name web-app-new -v ~/login-2519:/usr/share/nginx/html -p 8081:80 nginx  
        
        -> NOTE: With above observation, we can say now docker has dependency i.e NOT PORTABLE 


-> Dockerize / Build Docker Custom Images

        -> docker container run -dt --name web-app-new -v ~/login-2519:/usr/share/nginx/html -p 8081:80 nginx  

        -> Alternatively, a simple "Dockerfile" can be used to generate a new image 
        that includes the necessary content (which is a much cleaner solution than the bind mount above)

        -> Dockerize an application is the process of converting an application to run within a Docker container 
        without dependency. 

        -> Docker can build images automatically by reading the instructions from a "Dockerfile"

        -> A Dockerfile is a text document that contains all the commands a user could call on the command line 
        to assemble an image. Dockerfile is source code for Docker Image 

        -> Dockerize an application Flow

            -> create a Dockerfile with the required instructions in your project i.e repository

            -> use the "docker build" command to create a Docker image 

            -> Then you can run the container using the image built for confirmation 

        -> Dockerize login application 
        
            -> rm -rf login-2519
            -> git clone https://github.com/saif7m/login-2519.git 
            -> cd ~/login-2519
            -> ls 
            -> docker build -t user/image .
            -> docker build -t saif7m/login-2519 .
            -> touch Dockerfile
            -> ls 
            -> docker build -t saif7m/login-2519 .
            -> cat Dockerfile
            -> cat Dockerfile
                please build login app image
            -> docker build -t saif7m/login-2519 .
                unknown instruction: please
        
    ->  Docker Instructions

        FROM — set base image
        COPY — copy files to image
        RUN — execute command in container
        WORKDIR — set working directory
        VOLUME — create mount-point for a volume
        CMD — set executable for container
        EXPOSE — set port number 
        ENV — set environment variable

    -> cat Dockerfile
        
        # - means comment, ignored by docker
        # FROM - to set base functionality
        FROM nginx

        # COPY - to copy data from host to above image
        COPY . /usr/share/nginx/html

    -> docker build -t saif7m/login-2519 .

    -> docker container run -dt --name web-app -p 8080:80 saif7m/login-2519

    -> docker login

    -> docker push saif7m/login-2519

    -> cd ~
    -> docker container rm -f web-app 
    -> docker image ls 
    -> docker image rm -f saif7m/login-2519
    -> docker image ls 
    -> ls 
    -> rm -rf login-2519
    -> ls 

    -> docker container run -dt --name web-app -p 8080:80 saif7m/login-2519
